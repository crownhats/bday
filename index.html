<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
<title>Happy Birthday Shuchi!</title>
<!-- Google Font Satisfy for heading -->
<link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet" />
<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
<style>
  /* Reset and base */
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden;
    background: #000;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #container {
    width: 80vw;
    max-width: 800px;
    max-height: 700px;
    height: 90vh;
    position: relative;
    overflow: hidden;
    border-radius: 20px;
    box-shadow: 0 0 40px rgba(255 200 200 / 0.6);
    background: #1a1a1a;
    display: flex;
    flex-direction: column;
  }
  canvas#confettiCanvas {
    position: absolute;
    pointer-events: none;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    border-radius: 20px;
    z-index: 15;
  }
  canvas#celebrationCanvas {
    position: absolute;
    pointer-events: none;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    border-radius: 20px;
    z-index: 20;
  }
  .page {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0; left: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 30px 40px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 1s ease;
    z-index: 10;
    text-align: center;
  }
  .page.active {
    opacity: 1;
    pointer-events: all;
  }

  /* Suspense page styles */
  #suspensePage {
    background: linear-gradient(135deg, #1a237e 0%, #311b92 50%, #7e57c2 100%);
    color: #ffd700;
  }
  #suspensePage h1 {
    font-size: 3.5rem;
    margin-bottom: 20px;
    letter-spacing: 0.15em;
    position: relative;
    overflow: hidden;
  }
  #suspensePage h1::before {
    content: "Something Special Is Coming...";
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    color: #ffd700;
    animation: shimmer 3s infinite linear;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.9), transparent);
    background-repeat: no-repeat;
    background-size: 80% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  #suspensePage p {
    font-size: 1.5rem;
    margin-top: 0;
    animation: flicker 3s infinite;
  }

  /* Cake page styles */
  #cakePage {
    background: linear-gradient(to top, #8e2de2 0%, #4a00e0 100%);
    color: #fff;
    padding-bottom: 50px;
  }
  #cakePage h2 {
    font-size: 2.2rem;
    margin-bottom: 30px;
    text-shadow: 0 0 20px #ffb347;
  }
  #cake {
    position: relative;
    width: 280px;
    height: 340px;
    margin: 0 auto 40px;
  }
  .cake-base {
    width: 220px;
    height: 120px;
    background: linear-gradient(145deg, #d2691e 0%, #a0522d 100%);
    border-radius: 15px 15px 35px 35px;
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    box-shadow:
      inset 0 8px 12px #774c24,
      0 5px 8px rgba(0,0,0,0.8);
  }
  .icing {
    width: 250px;
    height: 50px;
    background: linear-gradient(135deg, #f48fb1 0%, #f06292 100%);
    border-radius: 30px 30px 15px 15px;
    position: absolute;
    bottom: 120px;
    left: 50%;
    transform: translateX(-50%);
    box-shadow:
      inset 0 7px 12px #aa3f5a,
      0 6px 9px rgba(0,0,0,0.4);
  }
  .candles {
    position: absolute;
    bottom: 157px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 20px;
  }
  .candle {
    position: relative;
    width: 25px;
    height: 65px;
    background: #fff9f0;
    border-radius: 5px;
    box-shadow: inset 0 5px 10px #bea48c;
  }
  .wick {
    position: absolute;
    top: -12px;
    left: 50%;
    width: 5px;
    height: 15px;
    background: #3d2a14;
    border-radius: 3px;
    transform: translateX(-50%);
  }
  .flame {
    position: absolute;
    top: -35px;
    left: 50%;
    width: 20px;
    height: 30px;
    background: radial-gradient(circle at 50% 40%, #ffd54f, #ff8f00 70%);
    border-radius: 60% 60% 50% 50% / 100% 100% 80% 80%;
    filter: drop-shadow(0 0 10px #ffb300);
    transform-origin: 50% 80%;
    animation: flickerFlame 1.5s infinite alternate ease-in-out;
    pointer-events: none;
  }
  .flame.blowed {
    animation: blowOut 2s forwards;
  }

  #blowBtn {
    padding: 15px 35px;
    background: #ff6f61;
    color: white;
    font-size: 1.25rem;
    border: none;
    border-radius: 35px;
    cursor: pointer;
    box-shadow: 0 7px 20px #ff6f61aa;
    transition: background 0.4s ease;
    user-select: none;
    z-index: 11;
    font-weight: 600;
  }
  #blowBtn:hover {
    background: #ff826f;
  }

  /* New Super Surprise Button Styles */
  #superSurpriseBtn {
    margin-top: 20px;
    padding: 15px 35px;
    background: #ff6f61;
    color: white;
    font-size: 1.25rem;
    border: none;
    border-radius: 35px;
    cursor: pointer;
    box-shadow: 0 7px 20px #ff6f61aa;
    transition: background 0.4s ease;
    user-select: none;
    font-weight: 600;
  }
  #superSurpriseBtn:hover {
    background: #ff826f;
  }

  /* Wishes page styles */
  #wishPage {
    background: linear-gradient(160deg, #f06292 0%, #ab47bc 100%);
    color: #fff;
    padding: 40px 35px 70px;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    position: relative;
    overflow: hidden;
  }
  #typingHeading {
    font-family: 'Satisfy', cursive;
    font-size: 3rem;
    margin-bottom: 10px; /* Adjusted margin to create more space */
    text-shadow: 0 0 30px #fff;
    user-select: none;
    white-space: nowrap;
    overflow: hidden;
    border-right: 0.15em solid #fff;
    box-sizing: border-box;
    min-height: 4.8rem;
  }
  #wishText {
    margin-top: 0;
    font-size: 1.5rem;
    line-height: 1.75;
    max-height: 400px;
    overflow-y: auto;
    padding: 28px 35px;
    font-family: 'Georgia', serif;
    text-shadow: 0 0 6px #4a007e;
    user-select: text;
    max-width: 600px;
    background: rgba(255 255 255 / 0.12);
    border-radius: 20px;
    box-shadow: inset 0 0 18px #9f7aea8f;
    word-wrap: break-word;
  }

  /* Animations */
  @keyframes shimmer {
    0% {background-position: -150% 0;}
    100% {background-position: 150% 0;}
  }
  @keyframes flicker {
    0%, 100% {opacity: 1;}
    50% {opacity: 0.7;}
  }
  @keyframes flickerFlame {
    0% {transform: translateX(-50%) rotate(0deg) scale(1);}
    50% {transform: translateX(calc(-50% + 1px)) rotate(4deg) scale(1.05);}
    100% {transform: translateX(calc(-50% - 1px)) rotate(-3deg) scale(1);}
  }
  @keyframes blowOut {
    0% {opacity: 1; transform: translateX(-50%) scale(1);}
    100% {opacity: 0; transform: translateX(-50%) scale(0.6);}
  }
  @keyframes zoomInOut {
    0%, 100% {transform: scale(1);}
    50% {transform: scale(1.1);}
  }

  /* Scrollbar style for wishes text */
  #wishText::-webkit-scrollbar {
    width: 7px;
  }
  #wishText::-webkit-scrollbar-thumb {
    background: #ab47bccc;
    border-radius: 6px;
  }
  #wishText::-webkit-scrollbar-track {
    background: transparent;
  }
</style>
</head>
<body>

<audio id="birthdayAudio" src="birthday-song.mp3" preload="auto"></audio>

<div id="container">
  <!-- Suspense page -->
  <section id="suspensePage" class="page active" aria-label="Suspense builder to birthday surprise">
    <h1>Something Special Is Coming...</h1>
    <p>Get ready, Shuchi!</p>
  </section>

  <!-- Cake page -->
  <section id="cakePage" class="page" aria-label="Birthday cake with candles and blow candle button">
    <h2>Light the candles and make a wish!</h2>
    <div id="cake" aria-hidden="true">
      <div class="icing"></div>
      <div class="cake-base"></div>
      <div class="candles">
        <div class="candle" id="candle1">
          <div class="wick"></div>
          <div class="flame"></div>
        </div>
        <div class="candle" id="candle2">
          <div class="wick"></div>
          <div class="flame"></div>
        </div>
        <div class="candle" id="candle3">
          <div class="wick"></div>
          <div class="flame"></div>
        </div>
        <div class="candle" id="candle4">
          <div class="wick"></div>
          <div class="flame"></div>
        </div>
        <div class="candle" id="candle5">
          <div class="wick"></div>
          <div class="flame"></div>
        </div>
      </div>
    </div>
    <button id="blowBtn" aria-label="Blow the candles">Blow Candles</button>
    <canvas id="confettiCanvas" aria-hidden="true"></canvas>
  </section>

  <!-- Wishes page -->
  <section id="wishPage" class="page" aria-label="Happy birthday wishes for Shuchi">
    <h1 id="typingHeading" aria-live="polite" aria-atomic="true"></h1>
    <div id="wishText" tabindex="0" aria-label="Emotional birthday message for Shuchi">
      Dear Shuchi,<br><br>
      On your special day, I just want to remind you how truly amazing you are. Your kindness, laughter, and strength light up every room you enter. May this year bring you endless joy, endless love, and all your heart desires.<br><br>
      Thank you for being such a wonderful friend and for inspiring me every single day. Here's to a year full of bright moments and beautiful surprises. I hope this birthday is as incredible as you are!<br><br>
      Happy Birthday once again, dear Shuchi! With all my love and best wishes,<br><br>
       Always, Your Catto ❤️
    </div>
    <button id="superSurpriseBtn" aria-label="Super Surprise">
      <i class="fas fa-gift"></i> Super Surprise
    </button>
    <canvas id="celebrationCanvas" aria-hidden="true"></canvas>
  </section>
</div>

<!-- Add your own audio file here, replace 'your-audio-file.mp3' with your actual file path -->
<audio id="birthdayAudio" src="your-audio-file.mp3" preload="auto"></audio>

<script>
  (function() {
    const suspensePage = document.getElementById('suspensePage');
    const cakePage = document.getElementById('cakePage');
    const wishPage = document.getElementById('wishPage');
    const blowBtn = document.getElementById('blowBtn');
    const superSurpriseBtn = document.getElementById('superSurpriseBtn'); // New button reference
    const flames = cakePage.querySelectorAll('.flame');
    const confettiCanvas = document.getElementById('confettiCanvas');
    const celebrationCanvas = document.getElementById('celebrationCanvas');
    const typingHeading = document.getElementById('typingHeading');
    const birthdayAudio = document.getElementById('birthdayAudio');

    let confettiRunning = false;
    let celebrationRunning = false;

    function showPage(page) {
      [suspensePage, cakePage, wishPage].forEach(p => p.classList.remove('active'));
      page.classList.add('active');
    }

    setTimeout(() => {
      showPage(cakePage);
    }, 7000);

    const ctx = confettiCanvas.getContext('2d');
    let W, H;
    function resizeCanvas() {
      W = confettiCanvas.width = cakePage.clientWidth;
      H = confettiCanvas.height = cakePage.clientHeight;
      celebrationCanvas.width = wishPage.clientWidth;
      celebrationCanvas.height = wishPage.clientHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    class ConfettiParticle {
      constructor(canvasWidth, canvasHeight, colors) {
        this.x = Math.random() * canvasWidth;
        this.y = Math.random() * canvasHeight - canvasHeight;
        this.r = Math.random() * 6 + 4;
        this.d = Math.random() * 30 + 10;
        this.color = colors[Math.floor(Math.random() * colors.length)];
        this.tilt = Math.floor(Math.random() * 10) - 10;
        this.tiltAngle = 0;
        this.tiltAngleIncrement = (Math.random() * 0.07) + 0.05;
      }
      draw(ctx) {
        ctx.beginPath();
        ctx.lineWidth = this.r / 2;
        ctx.strokeStyle = this.color;
        ctx.moveTo(this.x + this.tilt + this.r / 4, this.y);
        ctx.lineTo(this.x + this.tilt, this.y + this.tilt + this.r / 4);
        ctx.stroke();
      }
      update(canvasWidth, canvasHeight) {
        this.tiltAngle += this.tiltAngleIncrement;
        this.y += (Math.cos(this.d) + 3 + this.r / 2) / 2;
        this.x += Math.sin(this.d);
        this.tilt = Math.sin(this.tiltAngle) * 15;

        if (this.y > canvasHeight) {
          this.x = Math.random() * canvasWidth;
          this.y = -20;
          this.tilt = Math.floor(Math.random() * 10) - 10;
        }
      }
    }

    function randomRange(min, max) {
      return Math.random() * (max - min) + min;
    }

    const confettiColors = [
      '#ff0a54', '#ff477e', '#ff85a1', '#fbb1b1',
      '#f9bec7', '#a18cd1', '#f48fb1', '#b388ff',
      '#82b1ff', '#4fc3f7', '#81c784', '#c5e1a5',
      '#fff59d', '#ffe082', '#ffcc80'
    ];

    const celebrationColors = [
      '#fce18a', '#ff726d', '#b48def', '#f4306d', '#a7f9d1', '#ff9f68'
    ];

    let confettiParticles = [];
    let celebrationParticles = [];

    function startConfetti() {
      confettiParticles = [];
      for(let i = 0; i < 120; i++) {
        confettiParticles.push(new ConfettiParticle(W, H, confettiColors));
      }
      confettiRunning = true;
      requestAnimationFrame(confettiLoop);
    }
    function stopConfetti() {
      confettiRunning = false;
      ctx.clearRect(0, 0, W, H);
    }
    function confettiLoop() {
      if (!confettiRunning) return;
      ctx.clearRect(0, 0, W, H);
      confettiParticles.forEach(p => {
        p.update(W, H);
        p.draw(ctx);
      });
      requestAnimationFrame(confettiLoop);
    }

    const celebrationCtx = celebrationCanvas.getContext('2d');
    function startCelebration() {
      const cw = celebrationCanvas.width;
      const ch = celebrationCanvas.height;
      celebrationParticles = [];
      for(let i = 0; i < 80; i++) {
        celebrationParticles.push(new ConfettiParticle(cw, ch, celebrationColors));
      }
      celebrationRunning = true;
      celebrationLoop();
      setTimeout(() => {
        celebrationRunning = false;
        celebrationCtx.clearRect(0, 0, cw, ch);
      }, 10000);
    }
    function celebrationLoop() {
      if (!celebrationRunning) return;
      celebrationCtx.clearRect(0, 0, celebrationCanvas.width, celebrationCanvas.height);
      celebrationParticles.forEach(p => {
        p.update(celebrationCanvas.width, celebrationCanvas.height);
        p.draw(celebrationCtx);
      });
      requestAnimationFrame(celebrationLoop);
    }

    function typeText(element, text, delay=120) {
      let idx = 0;
      element.textContent = "";
      element.style.borderRight = "0.15em solid #fff";
      function type() {
        if (idx < text.length) {
          element.textContent += text.charAt(idx);
          idx++;
          setTimeout(type, delay);
        } else {
          element.style.borderRight = "none";
          startCelebration();
        }
      }
      type();
    }

    blowBtn.addEventListener('click', () => {
      flames.forEach(flame => {
        flame.classList.add('blowed');
      });
      blowBtn.disabled = true;
      blowBtn.style.cursor = 'default';
      blowBtn.textContent = 'Candles Blown!';

      // Play audio immediately on click
      if (birthdayAudio) {
        birthdayAudio.currentTime = 0;
        birthdayAudio.play().catch(err => {
          console.warn('Audio play was prevented:', err);
        });
      }

      startConfetti();

      // Transition to wishes page after 3 seconds
      setTimeout(() => {
        stopConfetti();
        showPage(wishPage);
        typeText(typingHeading, "🎂 Happy Birthday Shuchi");
      }, 3000);
    });

 // Add event listener for Super Surprise button
superSurpriseBtn.addEventListener('click', () => {
  window.location.href = 'super.html';
});


  })();
</script>
</body>
</html>
