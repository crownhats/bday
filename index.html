<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Happy Birthday Shuchi!</title>
<link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
<style>
  * { box-sizing: border-box; }
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden;
    background: #000;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #container {
    width: 80vw;
    max-width: 800px;
    max-height: 700px;
    height: 90vh;
    position: relative;
    overflow: hidden;
    border-radius: 20px;
    box-shadow: 0 0 40px rgba(255, 200, 200, 0.6);
    background: #1a1a1a;
    display: flex;
    flex-direction: column;
  }
  @media (min-width: 1024px) {
    #container {
      width: 60vw;
      height: 80vh;
    }
  }
  canvas#confettiCanvas,
  canvas#celebrationCanvas {
    position: absolute;
    pointer-events: none;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    border-radius: 20px;
    z-index: 15;
  }
  canvas#celebrationCanvas { z-index: 20; }
  .page {
    position: absolute;
    width: 100%; height: 100%;
    top: 0; left: 0;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    padding: 30px 40px;
    opacity: 0; pointer-events: none;
    transition: opacity 1s ease;
    z-index: 10;
    text-align: center;
  }
  .page.active { opacity: 1; pointer-events: all; }
  #suspensePage { background: linear-gradient(135deg, #1a237e 0%, #311b92 50%, #7e57c2 100%); color: #ffd700; }
  #suspensePage h1 {
    font-size: 3.5rem; margin-bottom: 20px; letter-spacing: 0.15em;
    position: relative; overflow: hidden;
  }
  #suspensePage h1::before {
    content: "Something Special Is Coming...";
    position: absolute; top: 0; left: 0;
    width: 100%; height: 100%; color: #ffd700;
    animation: shimmer 3s infinite linear;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.9), transparent);
    background-repeat: no-repeat;
    background-size: 80% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  #suspensePage p { font-size: 1.5rem; animation: flicker 3s infinite; }
  #cakePage, #wishPage { background: linear-gradient(to top, #8e2de2 0%, #4a00e0 100%); color: #fff; }
  #wishPage { background: linear-gradient(160deg, #f06292 0%, #ab47bc 100%); }
  #typingHeading {
    font-family: 'Satisfy', cursive;
    font-size: 3rem;
    text-shadow: 0 0 30px #fff;
    white-space: nowrap;
    overflow: hidden;
    border-right: 0.15em solid #fff;
    min-height: 4.8rem;
  }
  #wishText {
    font-size: 1.5rem;
    padding: 28px 35px;
    background: rgba(255, 255, 255, 0.12);
    border-radius: 20px;
    box-shadow: inset 0 0 18px #9f7aea8f;
    max-height: 400px;
    overflow-y: auto;
  }
  #wishText::-webkit-scrollbar { width: 7px; }
  #wishText::-webkit-scrollbar-thumb { background: #ab47bccc; border-radius: 6px; }
  @keyframes shimmer { 0% {background-position: -150% 0;} 100% {background-position: 150% 0;} }
  @keyframes flicker { 0%, 100% {opacity: 1;} 50% {opacity: 0.7;} }
</style>
</head>
<body>

<audio id="birthdayAudio" src="birthday-song.mp3" preload="auto" playsinline controls style="display:none;"></audio>

<div id="container">
  <section id="suspensePage" class="page active">
    <h1>Something Special Is Coming...</h1>
    <p>Get ready, Shuchi!</p>
  </section>
  <section id="cakePage" class="page">
    <h2>Light the candles and make a wish!</h2>
    <div id="cake"></div>
    <button id="blowBtn">Blow Candles</button>
    <canvas id="confettiCanvas"></canvas>
  </section>
  <section id="wishPage" class="page">
    <h1 id="typingHeading"></h1>
    <div id="wishText">
      Dear Shuchi,<br><br>
      On your special day, I just want to remind you how truly amazing you are...
      <br><br>Always, Your Catto ‚ù§Ô∏è
    </div>
    <button id="superSurpriseBtn"><i class="fas fa-gift"></i> Super Surprise</button>
    <canvas id="celebrationCanvas"></canvas>
  </section>
</div>

<script>
(function() {
  const suspensePage = document.getElementById('suspensePage');
  const cakePage = document.getElementById('cakePage');
  const wishPage = document.getElementById('wishPage');
  const blowBtn = document.getElementById('blowBtn');
  const typingHeading = document.getElementById('typingHeading');
  const birthdayAudio = document.getElementById('birthdayAudio');

  function showPage(page) {
    [suspensePage, cakePage, wishPage].forEach(p => p.classList.remove('active'));
    page.classList.add('active');
  }

  setTimeout(() => showPage(cakePage), 7000);

  blowBtn.addEventListener('click', () => {
    blowBtn.disabled = true;
    blowBtn.style.cursor = 'default';
    blowBtn.textContent = 'Candles Blown!';
    birthdayAudio.currentTime = 0;
    birthdayAudio.play().catch(err => console.warn('Audio play prevented:', err));
    setTimeout(() => {
      showPage(wishPage);
      typeText(typingHeading, "üéÇ Happy Birthday Shuchi");
    }, 3000);
  });

  function typeText(element, text, delay = 120) {
    let idx = 0;
    element.textContent = "";
    function type() {
      if (idx < text.length) {
        element.textContent += text.charAt(idx++);
        setTimeout(type, delay);
      } else {
        element.style.borderRight = "none";
      }
    }
    type();
  }

  document.getElementById('superSurpriseBtn').addEventListener('click', () => {
    window.location.href = 'super.html';
  });
})();
</script>
</body>
</html>
